/*! primedesk 2015-06-24*/
App.controller("allTicketController",["$scope","$http",function(a,b){a.tickets=[],a.allTickets=[],a.openTickets=[],a.archivedTickets=[],a.closedTickets=[],a.ticket={},a.users=[],a.userInfo={},b.get("/users/admin").success(function(b){console.log("All tickets page User response: ",b),a.admin=b}),a.getTickets=function(){b.get("/ticket/getTickets").then(function(b){a.allTickets=b.data,console.log("All Tickets",a.allTickets),a.openTickets=[],a.archivedTickets=[],a.closedTickets=[];for(var c=0;c<a.allTickets.length;c++)"tktClosed"==a.allTickets[c].tktStatus?a.closedTickets.push(a.allTickets[c]):"tktArchived"==a.allTickets[c].tktStatus?a.archivedTickets.push(a.allTickets[c]):"tktOpen"==a.allTickets[c].tktStatus&&a.openTickets.push(a.allTickets[c]);a.viewtkt(1)})},a.viewtkt=function(b){a.tickets=[],1==b?a.tickets=a.allTickets:2==b?(console.log("closedTickets: ",a.closedTickets),a.tickets=a.closedTickets):3==b?(a.tickets=a.archivedTickets,console.log("archivedTickets: ",a.archivedTickets)):4==b&&(a.tickets=a.openTickets,console.log("openTickets: ",a.openTickets))},a.ticketClass=function(c,d){return console.log("Ticket: ",c),console.log("Ticket Status: ",d),a.chgTktSts={tktStatus:d,_id:c._id},b.put("/ticket/updateStatus/",a.chgTktSts).success(a.getTickets)},a.getTickets()}]);